<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cennik - WordCraftPL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <a href="index.html" class="logo">WordCraft<span>PL</span></a>
        <nav>
            <a href="index.html">Strona GÅ‚Ã³wna</a>
            <a href="regulamin.html">Regulamin</a>
            <a href="cennik.html">Cennik</a>
            <a href="https://discord.gg/uvAhjpQsA9" target="_blank">Discord</a>
        </nav>
    </header>

    <main class="container">
        <h2>Cennik Rang i UsÅ‚ug</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 40px auto;">
            Wybierz interesujÄ…cÄ… CiÄ™ rangÄ™ i kliknij "Kup Teraz", aby sfinalizowaÄ‡ zakup. DziÄ™kujemy za wsparcie!
        </p>

        <div class="cennik-wrapper">

            <!-- Ranga VIP -->
            <div class="ranga-card">
                <div>
                    <h3 style="color: #4CAF50;">VIP</h3>
                    <div class="cena">5<span>.00 PLN</span></div>
                    <p>Podstawowe korzyÅ›ci i dostÄ™p do /kit vip!</p>
                </div>
                <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/5">Kup Teraz</a>
            </div>

            <!-- Ranga SVIP -->
            <div class="ranga-card">
                <div>
                    <h3 style="color: #ffc700;">SVIP</h3>
                    <div class="cena">10<span>.00 PLN</span></div>
                    <p>Wszystko z VIP oraz dodatkowe komendy!</p>
                </div>
                <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/10">Kup Teraz</a>
            </div>
            
            <!-- Ranga MVIP -->
            <div class="ranga-card">
                 <div>
                    <h3 style="color: #4af5b5;">MVIP</h3>
                    <div class="cena">15<span>.00 PLN</span></div>
                    <p>Wszystko z SVIP, dostÄ™p do /fly i wiÄ™cej!</p>
                </div>
                <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/15">Kup Teraz</a>
            </div>

            <!-- Ranga Sponsor -->
            <div class="ranga-card">
                <div>
                    <h3 style="color: #3498db;">Sponsor</h3>
                    <div class="cena">25<span>.00 PLN</span></div>
                    <p>PotÄ™Å¼na ranga z unikalnymi benefitami!</p>
                </div>
                <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/25">Kup Teraz</a>
            </div>

            <!-- Ranga Sigma -->
            <div class="ranga-card">
                <div>
                    <h3 style="color: #e74c3c;">Sigma</h3>
                    <div class="cena">30<span>.00 PLN</span></div>
                    <p>NajwyÅ¼sza ranga dla prawdziwych kozakÃ³w!</p>
                </div>
                <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/30">Kup Teraz</a>
            </div>
        </div>
    </main>
    
    <!-- === OKNO MODALNE (DOMYÅšLNIE UKRYTE) === -->
    <div id="paymentModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal">Ã—</span>
            <h2>Kupujesz rangÄ™: <span id="modalRankName"></span></h2>
            <div class="modal-price">Cena: <span id="modalRankPrice"></span></div>

            <p style="font-size:0.9em; color:#ccc;">WypeÅ‚nij poniÅ¼sze pola, abyÅ›my wiedzieli komu nadaÄ‡ rangÄ™.</p>

            <div class="nick-input-wrapper">
                <input type="text" id="minecraftNickInputModal" class="nick-input" placeholder="TwÃ³j nick z gry..." required>
            </div>
            <div class="nick-input-wrapper discord">
                <input type="text" id="discordNickInputModal" class="nick-input" placeholder="TwÃ³j nick z Discorda..." required>
            </div>
            
            <div class="modal-buttons-wrapper">
                <a href="#" id="modalPayPalButton" class="przycisk-glowny">ZapÅ‚aÄ‡ przez PayPal</a>
                <a href="https://discord.gg/uvAhjpQsA9" target="_blank" class="przycisk-glowny" style="background-color:#5865F2;">Ustal pÅ‚atnoÅ›Ä‡ (Discord)</a>
            </div>
        </div>
    </div>


<script>
// Czekamy, aÅ¼ caÅ‚a strona siÄ™ zaÅ‚aduje, aby uniknÄ…Ä‡ bÅ‚Ä™dÃ³w
document.addEventListener('DOMContentLoaded', () => {
    
    // --- KROK 1: ZBIERAMY WSZYSTKIE POTRZEBNE ELEMENTY ZE STRONY ---
    const modal = document.getElementById('paymentModal');
    const closeModalButton = document.querySelector('.close-modal');
    const allBuyButtons = document.querySelectorAll('.open-modal-button'); // Wszystkie przyciski "Kup Teraz" na kartach
    
    // Elementy wewnÄ…trz okna modalnego, ktÃ³re bÄ™dziemy zmieniaÄ‡
    const modalRankNameSpan = document.getElementById('modalRankName');
    const modalRankPriceSpan = document.getElementById('modalRankPrice');
    const nickInputMC = document.getElementById('minecraftNickInputModal');
    const nickInputDC = document.getElementById('discordNickInputModal');
    const finalPayPalButton = document.getElementById('modalPayPalButton'); // Przycisk PayPal w oknie
    
    // TwÃ³j link do webhooka na Discordzie
    const webhookUrl = "https://discord.com/api/webhooks/1386252782649999410/SbwZySOcJL_yK-adPmzdfD1IM6NBxuroQZrfWaoq_3zJhP2xpCfiv5HL_auH1FhX3Wjv";

    // --- KROK 2: DEFINIUJEMY FUNKCJE DO OTWIERANIA I ZAMYKANIA OKNA ---
    const openModal = (rankName, rankPrice, payPalLink) => {
        // UzupeÅ‚niamy okno danymi z klikniÄ™tej karty
        modalRankNameSpan.textContent = rankName;
        modalRankPriceSpan.textContent = rankPrice;
        finalPayPalButton.href = payPalLink; // WAÅ»NE: Ustawiamy link dla przycisku PayPal
        modal.style.display = 'flex'; // Pokazujemy okno
    };

    const closeModal = () => {
        modal.style.display = 'none';
        // CzyÅ›cimy dane po zamkniÄ™ciu, aby byÅ‚y puste przy nastÄ™pnym otwarciu
        nickInputMC.value = '';
        nickInputDC.value = '';
        nickInputMC.style.borderColor = '#444';
        nickInputDC.style.borderColor = '#444';
    };

    // --- KROK 3: DODAJEMY "NASÅUCHIWANIE" NA KLIKNIÄ˜CIA ---

    // Po klikniÄ™ciu dowolnego przycisku "Kup Teraz" na karcie...
    allBuyButtons.forEach(button => {
        button.addEventListener('click', (event) => {
            event.preventDefault();
            const card = button.closest('.ranga-card');
            const rankName = card.querySelector('h3').textContent;
            const rankPrice = card.querySelector('.cena').textContent.trim();
            const payPalLink = button.dataset.paypalLink;
            openModal(rankName, rankPrice, payPalLink); // Uruchamiamy funkcjÄ™ otwierania okna
        });
    });

    // Po klikniÄ™ciu przycisku "X" lub w tÅ‚o
    closeModalButton.addEventListener('click', closeModal);
    window.addEventListener('click', (event) => {
        if (event.target == modal) {
            closeModal();
        }
    });

    // Po klikniÄ™ciu finalnego przycisku PayPal W OKNIE
    finalPayPalButton.addEventListener('click', (event) => {
        event.preventDefault(); // Zatrzymujemy domyÅ›lne dziaÅ‚anie

        // Walidacja pÃ³l (sprawdzamy czy nie sÄ… puste)
        const nickGry = nickInputMC.value.trim();
        const nickDiscord = nickInputDC.value.trim();

        if (nickGry === "") {
            alert("BÅ‚Ä…d: Musisz wpisaÄ‡ swÃ³j nick z gry!");
            nickInputMC.style.borderColor = '#e74c3c';
            return; // KoÅ„czymy funkcjÄ™
        }
        nickInputMC.style.borderColor = '#444'; // Resetujemy kolor po poprawieniu

        if (nickDiscord === "") {
            alert("BÅ‚Ä…d: Musisz wpisaÄ‡ swÃ³j nick z Discorda!");
            nickInputDC.style.borderColor = '#e74c3c';
            return; // KoÅ„czymy funkcjÄ™
        }
        nickInputDC.style.borderColor = '#444'; // Resetujemy kolor po poprawieniu

        // Przygotowujemy dane do wysÅ‚ania na Discord
        const embedData = {
            embeds: [{
                title: "âœ… Nowe zamÃ³wienie przez PayPal!", color: 16758016,
                fields: [
                    { name: "ðŸ‘¤ Nick w Grze", value: "```" + nickGry + "```", inline: true },
                    { name: "ðŸ’¬ Nick na Discordzie", value: "```" + nickDiscord + "```", inline: true },
                    { name: "ðŸ’Ž Zakupiona Ranga", value: modalRankNameSpan.textContent, inline: false },
                    { name: "ðŸ’° Cena", value: modalRankPriceSpan.textContent, inline: false }
                ],
                footer: { text: "WordCraftPL - Powiadomienie o PÅ‚atnoÅ›ci" }, timestamp: new Date()
            }]
        };
        
        // WysyÅ‚amy powiadomienie na webhooka
        fetch(webhookUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(embedData) });

        alert("DziÄ™kujemy! Zostaniesz teraz przeniesiony do pÅ‚atnoÅ›ci.");
        
        // Zamykamy okno i otwieramy link do PayPal w nowej karcie
        closeModal();
        window.open(finalPayPalButton.href, '_blank');
    });

});
</script>

</body>
</html>
