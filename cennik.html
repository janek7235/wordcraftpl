<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cennik - WordCraftPL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <a href="index.html" class="logo">WordCraft<span>PL</span></a>
        <nav>
            <a href="index.html">Strona GÅ‚Ã³wna</a>
            <a href="regulamin.html">Regulamin</a>
            <a href="cennik.html">Cennik</a>
            <a href="https://discord.gg/uvAhjpQsA9" target="_blank">Discord</a>
        </nav>
    </header>

    <main class="container">
        <h2>Cennik Rang i UsÅ‚ug</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 40px auto;">
            Wybierz interesujÄ…cÄ… CiÄ™ rangÄ™ i kliknij "Kup Teraz", aby sfinalizowaÄ‡ zakup. DziÄ™kujemy za wsparcie!
        </p>

        <div class="cennik-wrapper">
            <!-- Rangi -->
            <div class="ranga-card"> <div> <h3 style="color: #4CAF50;">VIP</h3> <div class="cena">5<span>.00 PLN</span></div> <p>Podstawowe korzyÅ›ci i dostÄ™p do /kit vip!</p> </div> <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/5">Kup Teraz</a> </div>
            <div class="ranga-card"> <div> <h3 style="color: #ffc700;">SVIP</h3> <div class="cena">10<span>.00 PLN</span></div> <p>Wszystko z VIP oraz dodatkowe komendy!</p> </div> <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/10">Kup Teraz</a> </div>
            <div class="ranga-card"> <div> <h3 style="color: #4af5b5;">MVIP</h3> <div class="cena">15<span>.00 PLN</span></div> <p>Wszystko z SVIP, dostÄ™p do /fly i wiÄ™cej!</p> </div> <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/15">Kup Teraz</a> </div>
            <div class="ranga-card"> <div> <h3 style="color: #3498db;">Sponsor</h3> <div class="cena">25<span>.00 PLN</span></div> <p>PotÄ™Å¼na ranga z unikalnymi benefitami!</p> </div> <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/25">Kup Teraz</a> </div>
            <div class="ranga-card"> <div> <h3 style="color: #e74c3c;">Sigma</h3> <div class="cena">30<span>.00 PLN</span></div> <p>NajwyÅ¼sza ranga dla prawdziwych kozakÃ³w!</p> </div> <a href="#" class="przycisk-glowny open-modal-button" data-paypal-link="https://www.paypal.com/paypalme/janek7235/30">Kup Teraz</a> </div>
        </div>
    </main>
    
    <!-- === OKNO MODALNE === -->
    <div id="paymentModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal">Ã—</span>
            <h2>Kupujesz rangÄ™: <span id="modalRankName"></span></h2>
            <div class="modal-price">Cena: <span id="modalRankPrice"></span></div>

            <div id="image-puzzle-container">
                <p>UÅ‚Ã³Å¼ obrazek, przeciÄ…gajÄ…c kawaÅ‚ki w odpowiednie miejsca.</p>
                <div id="puzzle-board">
                    <div class="puzzle-slot" data-slot="1"></div>
                    <div class="puzzle-slot" data-slot="2"></div>
                    <div class="puzzle-slot" data-slot="3"></div>
                    <div class="puzzle-slot" data-slot="4"></div>
                </div>
                <div id="puzzle-pieces">
                    <!-- KaÅ¼dy kawaÅ‚ek to teraz osobny element! -->
                    <div class="puzzle-piece piece1" data-piece="1" draggable="true"></div>
                    <div class="puzzle-piece piece2" data-piece="2" draggable="true"></div>
                    <div class="puzzle-piece piece3" data-piece="3" draggable="true"></div>
                    <div class="puzzle-piece piece4" data-piece="4" draggable="true"></div>
                </div>
            </div>

            <div class="nick-input-wrapper"> <input type="text" id="minecraftNickInputModal" class="nick-input" placeholder="TwÃ³j nick z gry..." required> </div>
            <div class="nick-input-wrapper discord"> <input type="text" id="discordNickInputModal" class="nick-input" placeholder="TwÃ³j nick z Discorda..." required> </div>
            
            <div class="modal-buttons-wrapper">
                <a href="#" id="modalPayPalButton" class="przycisk-glowny" disabled>ZapÅ‚aÄ‡ przez PayPal</a>
                <a href="https://discord.gg/uvAhjpQsA9" target="_blank" class="przycisk-glowny" style="background-color:#5865F2;">Ustal pÅ‚atnoÅ›Ä‡ (Discord)</a>
            </div>
        </div>
    </div>


<script>
// Logika JAVASCRIPT POZOSTAJE BEZ ZMIAN! Nadal bÄ™dzie dziaÅ‚aÄ‡ poprawnie.
document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('paymentModal');
    const openModalButtons = document.querySelectorAll('.open-modal-button');
    const closeModalButton = document.querySelector('.close-modal');
    const modalRankName = document.getElementById('modalRankName');
    const modalRankPrice = document.getElementById('modalRankPrice');
    const nickInputMC = document.getElementById('minecraftNickInputModal');
    const nickInputDC = document.getElementById('discordNickInputModal');
    const modalPayPalButton = document.getElementById('modalPayPalButton');
    const webhookUrl = "https://discord.com/api/webhooks/1386252782649999410/SbwZySOcJL_yK-adPmzdfD1IM6NBxuroQZrfWaoq_3zJhP2xpCfiv5HL_auH1FhX3Wjv";
    const slots = document.querySelectorAll('.puzzle-slot');
    const piecesContainer = document.getElementById('puzzle-pieces');
    const pieces = piecesContainer.querySelectorAll('.puzzle-piece');
    let draggedPiece = null;
    let solvedPieces = 0;

    const openModal = (rankName, rankPrice, payPalLink) => {
        modalRankName.textContent = rankName;
        modalRankPrice.textContent = rankPrice;
        modalPayPalButton.href = payPalLink;
        resetCaptcha();
        modal.style.display = 'flex';
    };
    const closeModal = () => { modal.style.display = 'none'; };
    openModalButtons.forEach(button => button.addEventListener('click', e => {
        e.preventDefault();
        const card = e.currentTarget.closest('.ranga-card');
        openModal(card.querySelector('h3').textContent, card.querySelector('.cena').textContent.trim(), e.currentTarget.dataset.paypalLink);
    }));
    closeModalButton.addEventListener('click', closeModal);
    window.addEventListener('click', e => { if (e.target == modal) closeModal(); });

    const resetCaptcha = () => {
        solvedPieces = 0;
        modalPayPalButton.setAttribute('disabled', true);
        modalPayPalButton.style.opacity = '0.5';
        modalPayPalButton.style.cursor = 'not-allowed';
        slots.forEach(slot => {
            slot.classList.remove('solved');
            if (slot.firstChild) {
                piecesContainer.appendChild(slot.firstChild);
            }
        });
        Array.from(pieces).sort(() => Math.random() - 0.5).forEach(piece => piecesContainer.appendChild(piece));
    };
    pieces.forEach(piece => {
        piece.addEventListener('dragstart', e => { draggedPiece = e.target; });
    });
    slots.forEach(slot => {
        slot.addEventListener('dragover', e => { e.preventDefault(); if (!slot.firstChild) slot.classList.add('hover'); });
        slot.addEventListener('dragleave', e => slot.classList.remove('hover'));
        slot.addEventListener('drop', e => {
            e.preventDefault();
            slot.classList.remove('hover');
            if (draggedPiece && !slot.firstChild && slot.dataset.slot === draggedPiece.dataset.piece) {
                slot.appendChild(draggedPiece);
                slot.classList.add('solved');
                solvedPieces++;
                if (solvedPieces === pieces.length) {
                    modalPayPalButton.removeAttribute('disabled');
                    modalPayPalButton.style.opacity = '1';
                    modalPayPalButton.style.cursor = 'pointer';
                }
            }
            draggedPiece = null;
        });
    });
    modalPayPalButton.addEventListener('click', e => {
        e.preventDefault();
        if (solvedPieces !== pieces.length) { alert("Musisz najpierw uÅ‚oÅ¼yÄ‡ puzzle!"); return; }
        const nickGry = nickInputMC.value.trim();
        const nickDiscord = nickInputDC.value.trim();
        if (!nickGry || !nickDiscord) { alert("Oba pola z nickami muszÄ… byÄ‡ wypeÅ‚nione!"); return; }
        fetch(webhookUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({embeds: [{title: "âœ… Nowe zamÃ³wienie przez PayPal!", color: 16758016, fields: [{ name: "ðŸ‘¤ Nick w Grze", value: "```" + nickGry + "```", inline: true }, { name: "ðŸ’¬ Nick na Discordzie", value: "```" + nickDiscord + "```", inline: true }, { name: "ðŸ’Ž Zakupiona Ranga", value: modalRankName.textContent, inline: false }, { name: "ðŸ’° Cena", value: modalRankPrice.textContent, inline: false }], footer: { text: "WordCraftPL - Powiadomienie o PÅ‚atnoÅ›ci" }, timestamp: new Date() }]}) });
        alert("DziÄ™kujemy! Zostaniesz teraz przeniesiony do pÅ‚atnoÅ›ci.");
        closeModal();
        window.open(e.currentTarget.href, '_blank');
    });
});
</script>
</body>
</html>
